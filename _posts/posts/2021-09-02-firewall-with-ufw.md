---
title: "[Ubuntu] ufw로 방화벽 포트 설정하기"
excerpt: "OS가 준비되었으므로 본격적으로 웹 서버 환경을 구축해보자. 대표적인 WAS인 Tomcat을 활용하여 페이지를 호스팅한다."
coverImage: "https://user-images.githubusercontent.com/50317129/131238727-666f2aaa-d759-4f62-af73-3856086da73d.png"
date: "2021-09-02T23:07:19"
type: "posts"
category: "Ubuntu"
tag: [ "Ubuntu", "방화벽" ]
comment: true
publish: false
---

# 개요

모든 건물에는 입구가 존재한다. 일반적인 상황에서, 누구든지 해당 건물에 드나들기 위해선 좋든 싫든 입구를 통과해야한다.

이 입구라는 것이 또 마냥 열려있는 건 아니라서, 필요 시엔 개방되어있다가도 특정 시간에는 폐쇄되기도 한다.

심지어 어떤 곳은 까다롭기 그지없어서, 사람들 가려받기도 한다. 이를테면 보안구역이라던가, 금요일 밤의 클럽이라던가.

<br />

PC통신도 이와 원리가 별반 다를 바 없다. 보기엔 그냥 막 통신하는 것 같아도, 저마다 할당받은 입구를 통해 PC에 드나든다.

PC가 건물이라고 한다면, PC의 입구는 포트(PORT)라 할 수 있다.

<br />

모든 프로그램은 PC와의 통신 시 임의의 포트를 할당받는다. 프로그램은 해당 포트를 통해 들어오고, 나가며 정해진 동작을 수행한다.

만약 해당 포트가 막혀있다면, 해당 컴퓨터를 대상으론 정상적으로 동작할 수 없을 것이다.

이 프로그램이 내 PC에 필요하다면 포트를 열어주면 될 것이고, 아니라면 포트를 닫음으로써 접근하지 못하게 함이 바람직하다. 혹은 인증된 소수의 프로그램에게만 포트를 허용할 수도 있을 것이다.

<br />

말 그대로 보안과 매우 밀접한 개념으로써, 방화벽 설정을 통해 원하는 포트를 원하는 대상에게 개방/폐쇄할 수 있다.

Ubuntu에서 ufw를 통해 방화벽 설정을 원하는대로 설정해보자.

# 그냥 다 열면 안 돼?

조선시대 제주도는 문을 잠근다는 개념이 매우 미약했다고 한다.

옛 교통방식과 섬이라는 폐쇄적인 환경 덕분에 유동인구가 매우 적었고, 각 마을 주민에 대한 신원이 확실했을 것이다. 내륙에 비해 외지인이 방문/거주할 일도 매우 적었을 것이다.

이처럼 주변 환경과 사람들 간의 신뢰성이 있다면 굳이 그렇게 폐쇄적일 필요는 없을지도 모른다.

<br />

하지만 인터넷이라는 환경은 이와 결이 매우 다르다. 인터넷에 연결만 되어있다면 누구나 내 PC에 접근할 수 있는 잠재적 가능성을 가진다. 누가, 왜, 무엇을 위해 오는지도 알 수 없다.

이 경우 문을 아무렇게나 열어재껴놓는건 바람직한 상황이 아닐 것이다.

<br />

방화벽은 이러한 문제로부터 PC를 최대한 보호하기위해, 기본적으로 폐쇄적인 설정을 가진다. 일단 안 된다고 질러놓고 보는 셈이다.

보안을 위해서 방화벽은 가급적 폐쇄하되, 필요한 프로그램만 개방하는 화이트리스트 방식을 쓰는 습관을 들이도록 하자.

# ufw

기본적인 방화벽 명령어 `iptables`가 있지만, 명령어가 그리 직관적이지 않다는 단점이 있다. 이에 비해 `ufw`는 `iptables`에 비해 훨씬 쉽고 직관적인 명령어로 다룰 수 있다.

`iptables`과 성능상의 차이가 거의 없다는 점을 감안하면 확실한 장점.

## ufw 설치

ufw는 기본 명령어가 아니다. ufw를 설치하자.

``` bash
sudo apt-get install ufw
```

위 명령어를 통해 설치할 수 있다.

## ufw 상태 관리 명령어

ufw의 상태를 관리하는 명령어다.

``` bash
# ufw 활성화
sudo ufw enable

# ufw 비활성화
sudo ufw disable

# ufw 상태 확인
sudo ufw status verbose
```

ufw가 설치된 후 방화벽에 영향을 주는 걸 방지하기 위해 기본적으로 비활성화 상태로 설치된다.

`sudo ufw enable` 명령어를 입력하여 활성화하자.

## ufw 정책 관리 명령어

여러 포트를 관리하기 위해, ufw는 정책을 

``` bash

```