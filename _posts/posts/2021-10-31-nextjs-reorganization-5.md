---
title: "[NextJS] 블로그 개편기 - 5. marked를 응용하여 코드블럭 디자인 개선하기"
excerpt: ""
coverImage: "https://user-images.githubusercontent.com/50317129/134931033-89954c3d-5e00-4b3b-85aa-54a1dfa29e46.png"
date: "2021-10-31T14:36:46"
type: "posts"
category: "NextJS"
tag: [ "NextJS", "React", "Markdown" ]
group: "블로그 개편기"
comment: true
publish: true
---

# 개요

이전 장에서 marked를 활용하여 이 블로그만의 마크다운 변환기를 구현했다. 이 변환기를 활용하여 밋밋한 코드블럭을 좀 더 IDE 같게 개선해보자.










# 마크다운의 코드블럭

마크다운은 백틱(backtick)을 통해 코드블럭을 작성한다. 코드블럭의 종류는 인라인(inline) 형태와 블럭(block) 형태가 있다.





## 인라인형 코드블럭

인라인형 코드블럭은 백틱을 한 번 사용하여 표기하며, 아래와 같은 특징이 있다.

* 인라인 형태로 글 중간에 삽입하여 이어 쓰는 것이 가능
* 리스트, 표 등 어느 형태에서든 사용이 가능

`inline code block의 예시`는 이와 같다.





## 블럭형 코드블럭

블럭형 코드블럭은 백틱을 세 번 사용하여 표기하며, 아래와 같은 특징이 있다.

* 블럭 형태로 온전히 한 공간을 차지함
* 공간을 차지하므로, 글 중간에 이어 쓰거나, 리스트나 표에 쓰는 것이 불가능
* `html`, `markdown` 등의 언어 지정을 지원하므로, 언어별로 디테일한 코드 표현이 가능

``` javascript
const test = 'block codeblock test';

alert(test);
```

블럭형 코드블럭의 예시는 위와 같다. GitHub와 같이 마크다운을 지원하는 사이트의 경우, 코드블럭을 통해 해당하는 언어의 하이라이팅을 지원하기도 한다.










# 블럭형 코드블럭 디자인 개선하기

인라인형과 코드형 중에서 블럭형 코드블럭의 디자인을 개선해보자. 블럭형의 경우 인라인형과 달리 블럭 형태로 하나의 구역을 차지하며, 코드를 표기하기 때문에 디자인할 요소가 많은 편이다.

개선할 항목은 아래와 같다.

* 기본적인 디자인 프레임 변경
* 사용된 언어(JAVA, C# 등) 표시
* 내용 복사 버튼 추가
* 라인 숫자 표시
* 라인별 색상 구분 표시
* 마우스 오버 시 해당 라인 하이라이팅 구현

순차적으로 기능을 추가해보자





## 기본적인 디자인 프레임 변경하기

밋밋한 형태의 코드블럭 디자인을 변경하자. 외국 블로그에서 봤었던 코드블럭 형태 중 이쁘다고 생각했던 디자인을 모티브로 만들었다.

원랜 직접 보면서 디자인하려 했는데, 막상 찾으려고 하니 나오질 않아서 기억속에 어렴풋이 남아있는 디자인을 되짚어보며 구상했다.

-- 사진 --

위와 같이 창 형태의 디자인을 취하며, 좌측 상단에 매킨토시의 창 컨텍스트가 달려있다.

이미지를 사용할 수도 있겠지만, 태그로 구현할 수 있는건 가급적 태그로 구현하거나 정 여의치 않는다면 SVG로 구현하고자 하는 편이다. 이 디자인의 경우 복잡한 문양이 없으므로 HTML 태그 단계에서 모두 구현할 수 있을 것 같다.

-- 사진 --

적용할 레이아웃은 위와 같다. 이를 토대로 HTML화하면 아래와 같이 나타낼 수 있다.

``` html

```

태그가 알맞은 위치와 색상을 갖기 위해 스타일코드를 적용하자.

``` scss

```

렌더러가 코드블럭을 위와 같이 렌더링하도록 변경하자.

인라인형과 블럭형을 구분하는 방법은 의외로 간단한데, 블럭형의 경우 인라인형과 다르게 렌더러에서 언어를 반환한다. 언어가 있을 경우 블럭형, 없을 경우 인라인형이다. 언어가 있는 경우에만 해당 HTML로 렌더링하도록 오버라이딩한다.

``` typescript

```

이후 블럭형 코드블럭은 개선된 디자인이 적용될 것이다.





## 사용된 언어 표시하기

블럭형 코드블럭은 사용하는 언어를 표시한다. 이를 받아서 적절한 위치에 표시해주면 될 것이다.

위 디자인 기준으로, 헤더 부분에 언어를 표시해주는 것이 좋아보인다.

``` typescript

```

필요하다면 디자인을 수정해줄 수도 있다. 필자의 경우 폰트 색상 정도만 변경했다.





## 내용 복사 버튼 추가하기

개발자 친화적인 사이트의 코드블럭 대부분은 코드블럭의 내용을 복사하는 버튼을 제공한다. 이를 통해 사용자는 굳이 내용 전체를 드래그하지 않고도 코드블럭의 내용을 손쉽게 복사할 수 있다.

블럭형 코드블럭 렌더링 시 버튼을 추가하고, 클릭 이벤트에 코드블럭의 내용을 복사하도록 지정하는 스크립트를 추가하면 될 것이다.

``` html

```

레이아웃은 위와 같다. 버튼 하나가 추가된다.

``` scss

```

스타일 코드는 이와 같다. 
